CREATE SEQUENCE SEQ_MACHINE START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_SERVICE START WITH 1 INCREMENT BY 1;


-- Tables
CREATE TABLE TBL_MACHINE_INFO (
ID NUMBER(11) PRIMARY KEY,
LINE VARCHAR2(10),
STATION_NAME VARCHAR2(100) NOT NULL,
DEVICE_TYPE VARCHAR2(100),
LOCATION_TYPE VARCHAR2(20),
FLOOR VARCHAR2(20),
DETAIL_LOCATION VARCHAR2(200),
DEVICE_COUNT NUMBER(5),
CONTRACTOR VARCHAR2(100),
PHONE VARCHAR2(20),
LATITUDE NUMBER(10,7),
LONGITUDE NUMBER(10,7),
CREATE_DATE TIMESTAMP,
MODIFY_DATE TIMESTAMP
);


CREATE TABLE TBL_SERVICE_TYPE (
ID NUMBER(11) PRIMARY KEY,
SERVICE_NAME VARCHAR2(100) UNIQUE NOT NULL,
DESCRIPTION VARCHAR2(255),
CREATE_DATE TIMESTAMP,
MODIFY_DATE TIMESTAMP
);


CREATE TABLE TBL_MACHINE_SERVICE (
MACHINE_ID NUMBER(11) NOT NULL,
SERVICE_ID NUMBER(11) NOT NULL,
CONSTRAINT FK_MS_MACHINE FOREIGN KEY (MACHINE_ID) REFERENCES TBL_MACHINE_INFO(ID),
CONSTRAINT FK_MS_SERVICE FOREIGN KEY (SERVICE_ID) REFERENCES TBL_SERVICE_TYPE(ID),
CONSTRAINT UQ_MS UNIQUE (MACHINE_ID, SERVICE_ID)
);